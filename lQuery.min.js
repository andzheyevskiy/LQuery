const $=function(){class LQueryDOM{constructor(query){this.dom=[...document.querySelectorAll(query)]}ready(fn){if(this.dom.length===1&&this.dom[0]instanceof Document){document.addEventListener("DOMContentLoaded",fn)}}getHTML(){return this.dom.map(e=>e.outerHTML).join("")}html(html){if(html){this.dom.forEach(e=>e.innerHTML=html);return this}else{const result=this.dom.map(e=>e.innerHTML);if(result.length===1){return result[0]}else{return result}}}text(text){if(text){this.dom.forEach(e=>e.textContent=text);return this}else{const result=this.dom.map(e=>e.textContent);if(result.length===1){return result[0]}else{return result}}}val(value){if(value){this.dom.forEach(e=>{if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.tagName==="SELECT"){e.value=value}else{e.setAttribute("value",value)}});return this}else{const result=this.dom.map(e=>e.getAttribute("value"));if(result.length===1){return result[0]}else{return result}}}attr(name,value){if(name&&value){this.dom.forEach(e=>e.setAttribute(name,value));return this}else if(name){const result=this.dom.map(e=>e.getAttribute(name));if(result.length===1){return result[0]}else{return result}}else{return this}}css(...args){if(args.length===2){this.dom.forEach(e=>e.style[args[0]]=args[1]);return this}else if(typeof args[0]==="object"){for(const prop in args[0]){if(args[0].hasOwnProperty(prop)){this.dom.forEach(e=>e.style[prop]=args[0][prop])}}return this}else{return this}}append(html){if(typeof html==="string"){this.dom.forEach(e=>e.insertAdjacentHTML("beforeend",html))}else if(html instanceof HTMLElement){this.dom.forEach(e=>e.appendChild(html))}return this}prepend(html){if(typeof html==="string"){this.dom.forEach(e=>e.insertAdjacentHTML("afterbegin",html))}else if(html instanceof HTMLElement){this.dom.forEach(e=>e.insertBefore(html,e.firstChild))}return this}after(html){if(typeof html==="string"){this.dom.forEach(e=>e.insertAdjacentHTML("afterend",html))}else if(html instanceof HTMLElement){this.dom.forEach(e=>e.parentNode.insertBefore(html,e.nextSibling))}return this}before(html){if(typeof html==="string"){this.dom.forEach(e=>e.insertAdjacentHTML("beforebegin",html))}else if(html instanceof HTMLElement){this.dom.forEach(e=>e.parentNode.insertBefore(html,e))}return this}remove(selector){if(selector){this.dom.forEach(e=>e.querySelectorAll(selector).forEach(x=>x.remove()))}else{this.dom.forEach(e=>e.remove())}}empty(){this.dom.forEach(e=>e.innerHTML="");return this}wrap(element){if(typeof element==="string"){const newElement=document.createElement(element);this.before(newElement);const newLquery=new LQueryDOM("null");newLquery.dom=[newElement];this.dom.forEach(e=>{newLquery.append(e)})}else if(element instanceof Document){this.dom.forEach(e=>{element.appendChild(e)})}return this}clone(cloneEvents=false){const newLQueryDom=new LQueryDOM("null");newLQueryDom.dom=this.dom.map(e=>e.cloneNode(true));if(cloneEvents){this.dom.forEach((e,i)=>{global.copyEvents(e,newLQueryDom.dom[i])})}return newLQueryDom}replaceWith(newContent){if(newContent instanceof LQueryDOM){newContent.dom.forEach(e=>{this.after(e)});this.remove()}else{this.dom.forEach(e=>{e.replaceWith(newContent)})}return this}on(type,fn){this.dom.forEach(e=>global.addEvent(e,type,fn));return this}off(type,fn){this.dom.forEach(e=>global.removeEvent(e,type,fn));return this}click(fn){if(fn){this.on("click",fn)}else{this.dom.forEach(e=>e.dispatchEvent(new Event("click")))}return this}dblclick(fn){if(fn){this.on("dblclick",fn)}else{this.dom.forEach(e=>e.dispatchEvent(new Event("dblclick")))}return this}hover(fnOnHover,fnOnLeave){this.on("mouseenter",fnOnHover);if(fnOnLeave)this.on("mouseleave",fnOnLeave);return this}focus(fn){if(fn){this.on("focus",fn)}else{this.dom.forEach(e=>e.dispatchEvent(new Event("focus")))}return this}blur(fn){if(fn){this.on("blur",fn)}else{this.dom.forEach(e=>e.dispatchEvent(new Event("blur")))}return this}trigger(type){const event=new Event(type);this.dom.forEach(e=>e.dispatchEvent(event));return this}animate(animation,duration="400ms",easing="linear",complete){global.addAnimation(this.dom,animation,duration,easing);const durationinMS=utils.convertToMs(duration);if(complete&&typeof complete==="function"){setTimeout(()=>{complete.call(this)},durationinMS)}return this}fadeIn(duration="400ms",complete){global.addFadeIn(this.dom,duration,"linear");const durationinMS=utils.convertToMs(duration);if(complete&&typeof complete==="function"){setTimeout(()=>{complete.call(this)},durationinMS)}return this}fadeOut(duration="400ms",complete){global.addFadeOut(this.dom,duration,"linear");const durationinMS=utils.convertToMs(duration);if(complete&&typeof complete==="function"){setTimeout(()=>{complete.call(this)},durationinMS)}return this}slideDown(duration="400ms",complete){global.addSlideDown(this.dom,duration,"linear");const durationinMS=utils.convertToMs(duration);if(complete&&typeof complete==="function"){setTimeout(()=>{complete.call(this)},durationinMS)}return this}slideUp(duration="400ms",complete){global.addSlideUp(this.dom,duration,"linear");const durationinMS=utils.convertToMs(duration);if(complete&&typeof complete==="function"){setTimeout(()=>{complete.call(this)},durationinMS)}return this}}class globalTracker{constructor(){this.events=new Map;this.animationSeq=0;this.animations={fadeIn:{name:"LQueryAnimationFadeIn",isIncluded:false,css:"@keyframes LQueryAnimationFadeIn {from {opacity: 0;} to{opacity: 1;}}"},fadeOut:{name:"LQueryAnimationFadeOut",isIncluded:false,css:"@keyframes LQueryAnimationFadeOut {from {opacity: 1;} to{opacity: 0;}}"},slideDown:{name:"LQueryAnimationSlideDown",isIncluded:false,css:"@keyframes LQueryAnimationSlideDown { from {transform: translateY(-100%);} to {transform: translateY(0);}}"},slideUp:{name:"LQueryAnimationSlideUp",isIncluded:false,css:"@keyframes LQueryAnimationSlideUp { from {transform: translateY(100%);} to {transform: translateY(0);}}"}}}addEvent(element,type,fn){if(!this.events.has(element)){this.events.set(element,[])}this.events.get(element).push({type:type,function:fn});element.addEventListener(type,fn)}removeEvent(element,type,fn){if(this.events.has(element)){const eventsArray=this.events.get(element).filter(event=>!(event.type===type&&event.function===fn));if(eventsArray.length>0){this.events.set(element,eventsArray)}else{this.events.delete(element)}element.removeEventListener(type,fn)}}copyEvents(originalElement,newElement){if(this.events.has(originalElement)){const originalEvents=this.events.get(originalElement);originalEvents.forEach(event=>{this.addEvent(newElement,event.type,event.function)})}}getStyle(){const doesExist=document.querySelector("style");if(!doesExist){const styleElement=document.createElement("style");document.querySelector("head").appendChild(styleElement);return styleElement}else{return doesExist}}getAnimationName(){return`LQueryAnimation${this.animationSeq++}`}addAnimation(elements,animation,duration,easing){const durationinMS=utils.convertToMs(duration);const animationName=this.getAnimationName();const formatted=Object.entries(animation).map(([key,value])=>`${key}: ${value}`).join("; ");const animationStr=`@keyframes ${animationName} { to {${formatted}}}`;const inlineToAppend=`${animationName} ${durationinMS}ms ${easing} forwards`;this.getStyle().append(animationStr);elements.forEach(e=>{const finalStr=e.style.animation?`${e.style.animation},${inlineToAppend}`:inlineToAppend;e.style.animation=finalStr})}addFadeIn(element,duration,easing){const durationinMS=utils.convertToMs(duration);const animationName=this.animations.fadeIn.name;const inlineToAppend=`${animationName} ${durationinMS}ms ${easing} forwards`;if(!this.animations.fadeIn.isIncluded){this.getStyle().append(this.animations.fadeIn.css);this.animations.fadeIn.isIncluded=true}element.forEach(e=>{const finalStr=e.style.animation?`${e.style.animation},${inlineToAppend}`:inlineToAppend;e.style.animation=finalStr})}addFadeOut(element,duration,easing){const durationinMS=utils.convertToMs(duration);const animationName=this.animations.fadeOut.name;const inlineToAppend=`${animationName} ${durationinMS}ms ${easing} forwards`;if(!this.animations.fadeOut.isIncluded){this.getStyle().append(this.animations.fadeOut.css);this.animations.fadeOut.isIncluded=true}element.forEach(e=>{const finalStr=e.style.animation?`${e.style.animation},${inlineToAppend}`:inlineToAppend;e.style.animation=finalStr})}addSlideDown(element,duration,easing){const durationinMS=utils.convertToMs(duration);const animationName=this.animations.slideDown.name;const inlineToAppend=`${animationName} ${durationinMS}ms ${easing} forwards`;if(!this.animations.slideDown.isIncluded){this.getStyle().append(this.animations.slideDown.css);this.animations.slideDown.isIncluded=true}element.forEach(e=>{const finalStr=e.style.animation?`${e.style.animation},${inlineToAppend}`:inlineToAppend;e.style.animation=finalStr})}addSlideUp(element,duration,easing){const durationinMS=utils.convertToMs(duration);const animationName=this.animations.slideUp.name;const inlineToAppend=`${animationName} ${durationinMS}ms ${easing} forwards`;if(!this.animations.slideUp.isIncluded){this.getStyle().append(this.animations.slideUp.css);this.animations.slideUp.isIncluded=true}element.forEach(e=>{const finalStr=e.style.animation?`${e.style.animation},${inlineToAppend}`:inlineToAppend;e.style.animation=finalStr})}}const global=new globalTracker;const utils={convertToMs:function(string){if(typeof string==="number"){return string}else if(string.endsWith("ms")){return parseInt(string,10)}else if(string.endsWith("s")){return parseInt(string,10)*1e3}},each:function(item,fn){if(Array.isArray(item)){item.forEach(e=>fn(e))}else if(typeof item==="object"&&item!==null&&item!==undefined){Object.entries(item).forEach(([key,value])=>fn(key,value))}},map:function(item,fn){if(Array.isArray(item)){return item.map(e=>fn(e))}else if(typeof item==="object"&&item!==null&&item!==undefined){return Object.entries(item).map(([key,value])=>fn(key,value))}},grep:function(item,fn,invert=false){let items;if(Array.isArray(item)){items=invert?[...item].reverse():item;return items.filter(e=>fn(e))}else if(typeof item==="object"&&item!==null&&item!==undefined){const arrFromObj=Object.entries(item);items=invert?[...arrFromObj].reverse():arrFromObj;return items.filter(([key,value])=>fn(key,value))}},extend:function(deep,target,...objects){if(typeof deep!=="boolean"){objects.unshift(target);target=deep;deep=false}if(!deep){return Object.assign({},target,...objects)}const deepClone=obj=>{if(obj===null||typeof obj!=="object")return obj;if(Array.isArray(obj))return obj.map(deepClone);return Object.keys(obj).reduce((acc,key)=>{acc[key]=deepClone(obj[key]);return acc},{})};const combined=[target,...objects];const deepCopies=combined.map(deepClone);return deepCopies.reduce((merged,current)=>{return{...merged,...current}},{})}};class Ajax{constructor(url,options){if(!url&&!options){throw new Error("No url or options provided")}this.url=typeof url==="string"?url:options.url;this.options=typeof url==="object"?url:options;this.method=options.method||"GET";this.body=options.data;this.response=undefined;this.data=undefined;this.error=undefined;this.initPromise=this.init()}async init(){const headers=new Headers;if(this.options.accepts){Object.entries(this.options.accepts).forEach(([key,value])=>{headers.append("Accept",`${key}: ${value}`)})}if(this.options.contentType){headers.append("Content-Type",this.options.contentType)}if(this.options.headers){Object.entries(this.options.headers).forEach(([key,value])=>{headers.append(key,value)})}const fetchOptions={headers:headers,method:this.method,url:this.url};if(this.options.cache===false){fetchOptions.cache="no-store"}if(this.options.crossDomain){fetchOptions.mode="cors"}if(this.body&&this.method!=="GET"){fetchOptions.body=JSON.stringify(this.body)}else{const urlParams=new URLSearchParams;for(const key in this.body){if(this.body.hasOwnProperty(key)){urlParams.append(encodeURIComponent(key),encodeURIComponent(this.body[key]))}fetchOptions.url=`${this.url}?${urlParams.toString()}`}}await this._useFetch(fetchOptions);await this._formatData();this._filterData();this._handleComplete()}async done(fn){await this.initPromise;this._success(fn);return this}async fail(fn){await this.initPromise;this._error(fn);return this}async always(fn){await this.initPromise;this._complete(fn);return this}async then(successFn,errorFn){await this.initPromise;if(successFn)this._complete(successFn);if(errorFn)this._error(errorFn);return this}async catch(fn){this.fail(fn);return this}_useFetch=async options=>{const controller=new AbortController;options.signal=controller.signal;const fetchPromise=fetch(options.url,options).catch(err=>{if(err.name!=="AbortError")throw err});const finalFetchArr=[fetchPromise];let timeoutPromise;if(this.options.timeout){timeoutPromise=new Promise(resolve=>{const timeoutId=setTimeout(()=>{controller.abort();resolve({ok:false,status:"timeout",statusText:"Request timed out"})},this.options.timeout);fetchPromise.finally(()=>{clearTimeout(timeoutId)})});finalFetchArr.push(timeoutPromise)}try{this.response=await Promise.race(finalFetchArr);if(!this.response.ok)this.error=`HTTP error! status: ${this.response.status} - ${this.response.statusText}`}catch(err){this.response={ok:false,status:"error",statusText:err.message};this.error=err}};_format=async format=>{let data;switch(format){case"xml":data=(new DOMParser).parseFromString(await this.response.text(),"application/xml");break;case"html":data=(new DOMParser).parseFromString(await this.response.text(),"text/html");break;case"script":const script=document.createElement("script");script.textContent=await this.response.text();data=script;break;case"json":data=await this.response.json();break;case"text":data=resText;break;default:throw new Error(`Usupported format ${format}`)}return data};_formatData=async()=>{const type=this.options.dataType||"json";if(this.response.ok){this.data=await this._format(type)}};_filterData=()=>{if(typeof this.options.dataFilter==="function"){this.data=this.options.dataFilter.call(this.options.context||this,this.data,this.options.dataType)}};_statusCode=()=>{if(this.options.statusCode){const code=this.response.status;const object=this.options.statusCode;const data=this.response.ok?this.data:this.error;if(object.hasOwnProperty(code)){object[code].call(this.options.context,data)}}};_success=fn=>{if(this.response.ok){if(typeof fn==="function"){fn.call(this.options.context,this.data)}}};_error=fn=>{if(this.error){if(typeof fn==="function"){fn.call(this.options.context,this.error)}}};_complete=fn=>{if(typeof fn==="function"){fn.call(this.options.context,this.error,this.data)}};_handleComplete=()=>{this._statusCode();this._success(this.options.success);this._error(this.options.error);this._complete(this.options.complete)}}const lQueryMiddleware={_request:(url,options,method)=>{if(typeof url==="object"){url.method=method;return new Ajax(url)}else{options.method=method;return new Ajax(url,options)}},ajax:(url,options)=>{return new Ajax(url,options)},get:(url,options)=>{return lQueryMiddleware._request(url,options,"GET")},post:(url,options)=>{return lQueryMiddleware._request(url,options,"POST")},put:(url,options)=>{return lQueryMiddleware._request(url,options,"PUT")},delete:(url,options)=>{return lQueryMiddleware._request(url,options,"DELETE")}};function finalHandler(query){if(query){return new LQueryDOM(query)}}finalHandler.ajax=lQueryMiddleware.ajax;finalHandler.get=lQueryMiddleware.get;finalHandler.post=lQueryMiddleware.post;finalHandler.put=lQueryMiddleware.put;finalHandler.delete=lQueryMiddleware.delete;finalHandler.each=utils.each;finalHandler.map=utils.map;finalHandler.grep=utils.grep;finalHandler.extend=utils.extend;return finalHandler}();